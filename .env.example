# =============================================================================
# Bush Platform - Environment Variables
# =============================================================================
# Copy to .env.local and fill in real values.
# Variables marked [REQUIRED] have no defaults and must be set.
# Variables marked [SECRET] must never be committed to git.
# =============================================================================

# -- App --
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=debug                          # debug | info | warn | error
APP_URL=http://localhost:3000            # Next.js frontend URL
API_URL=http://localhost:3001            # Hono backend URL

# -- Database (SQLite) --
DATABASE_URL=./data/bush.db              # Relative to project root
DATABASE_WAL_MODE=true
DATABASE_BUSY_TIMEOUT=5000

# -- Redis --
REDIS_URL=redis://localhost:6379
REDIS_KEY_PREFIX=bush:

# -- WorkOS AuthKit [REQUIRED] [SECRET] --
WORKOS_API_KEY=sk_test_...               # [SECRET] WorkOS API key
WORKOS_CLIENT_ID=client_...              # [REQUIRED] WorkOS client ID
NEXT_PUBLIC_WORKOS_REDIRECT_URI=http://localhost:3000/api/auth/callback
WORKOS_WEBHOOK_SECRET=whsec_...          # [SECRET] WorkOS webhook signing secret
WORKOS_COOKIE_PASSWORD=                   # [SECRET] Cookie encryption password (min 32 chars). Uses SESSION_SECRET if not set.

# -- Object Storage (S3-compatible) --
STORAGE_PROVIDER=minio                   # minio | s3 | r2 | b2
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY=minioadmin            # [SECRET] S3 access key
STORAGE_SECRET_KEY=minioadmin            # [SECRET] S3 secret key
STORAGE_BUCKET=bush-primary
STORAGE_BUCKET_DERIVATIVES=              # Optional, defaults to primary bucket

# -- CDN --
CDN_PROVIDER=none                        # none | bunny | cloudfront | fastly
CDN_BASE_URL=                            # Empty for dev (serves from storage direct)
CDN_SIGNING_KEY=                         # [SECRET] CDN signing key

# -- Media Processing --
FFMPEG_PATH=/usr/bin/ffmpeg              # Path to ffmpeg binary
FFPROBE_PATH=/usr/bin/ffprobe            # Path to ffprobe binary
MEDIA_TEMP_DIR=./data/tmp                # Temp directory for processing
MEDIA_MAX_CONCURRENT_JOBS=2              # Concurrent FFmpeg processes

# -- Email (SMTP) --
SMTP_HOST=localhost
SMTP_PORT=1025                           # Mailpit default port
SMTP_USER=
SMTP_PASS=                               # [SECRET]
SMTP_FROM=noreply@bush.local
SMTP_SECURE=false                        # true for TLS in production

# -- Next.js Public Variables --
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_WS_URL=ws://localhost:3001
NEXT_PUBLIC_APP_NAME=Bush

# -- Session --
SESSION_SECRET=change-me-to-at-least-32-characters-in-production   # [SECRET] Session encryption key (min 32 chars)
SESSION_MAX_AGE=604800                   # 7 days in seconds

# -- Rate Limiting --
RATE_LIMIT_WINDOW_MS=60000               # 1 minute
RATE_LIMIT_MAX_REQUESTS=100              # Per window per IP

# -- Upload --
UPLOAD_MAX_FILE_SIZE=5368709120          # 5 GB in bytes (5 TB supported via multipart)
UPLOAD_PRESIGNED_URL_EXPIRY=3600         # 1 hour in seconds
UPLOAD_MULTIPART_CHUNK_SIZE=10485760     # 10 MB

# -- Backup --
BACKUP_STORAGE_BUCKET=bush-backups
LITESTREAM_ENABLED=false                 # Enable SQLite streaming backup
