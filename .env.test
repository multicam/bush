# =============================================================================
# Bush Platform - Test Environment Variables
# =============================================================================
# Deterministic configuration for automated tests.
# Uses in-memory SQLite and separate Redis key prefix.
# =============================================================================

# -- App --
NODE_ENV=test
PORT=3002
HOST=0.0.0.0
LOG_LEVEL=warn
APP_URL=http://localhost:3002
API_URL=http://localhost:3002

# -- Database (SQLite in-memory) --
DATABASE_URL=:memory:
DATABASE_WAL_MODE=false
DATABASE_BUSY_TIMEOUT=5000

# -- Redis --
REDIS_URL=redis://localhost:6379
REDIS_KEY_PREFIX=bush:test:

# -- WorkOS (mocked in tests) --
WORKOS_API_KEY=sk_test_fake_key_for_testing
WORKOS_CLIENT_ID=client_test_fake_id
WORKOS_REDIRECT_URI=http://localhost:3002/callback
WORKOS_WEBHOOK_SECRET=whsec_test_fake_secret

# -- Object Storage --
STORAGE_PROVIDER=minio
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_BUCKET=bush-test
STORAGE_BUCKET_DERIVATIVES=

# -- CDN --
CDN_PROVIDER=none
CDN_BASE_URL=
CDN_SIGNING_KEY=

# -- Media Processing --
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
MEDIA_TEMP_DIR=./data/tmp/test
MEDIA_MAX_CONCURRENT_JOBS=1

# -- Email --
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASS=
SMTP_FROM=test@bush.local
SMTP_SECURE=false

# -- Next.js Public Variables --
NEXT_PUBLIC_API_URL=http://localhost:3002
NEXT_PUBLIC_WS_URL=ws://localhost:3002
NEXT_PUBLIC_APP_NAME=Bush Test

# -- Session --
SESSION_SECRET=test-session-secret-at-least-32-characters-long-for-security
SESSION_MAX_AGE=604800

# -- Rate Limiting --
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# -- Upload --
UPLOAD_MAX_FILE_SIZE=1073741824
UPLOAD_PRESIGNED_URL_EXPIRY=3600
UPLOAD_MULTIPART_CHUNK_SIZE=10485760

# -- Backup --
BACKUP_STORAGE_BUCKET=bush-test-backups
LITESTREAM_ENABLED=false
